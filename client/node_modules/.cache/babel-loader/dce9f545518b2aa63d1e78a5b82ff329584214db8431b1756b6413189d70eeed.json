{"ast":null,"code":"'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar LocalTrackPublicationSignaling = require('../localtrackpublication');\nvar TwilioWarning = require('../../util/twiliowarning');\nvar createTwilioError = require('../../util/twilio-video-errors').createTwilioError;\n/**\n * @extends LocalTrackPublicationSignaling\n */\nvar LocalTrackPublicationV2 = /** @class */function (_super) {\n  __extends(LocalTrackPublicationV2, _super);\n  /**\n   * Construct a {@link LocalTrackPublicationV2}.\n   * @param {DataTrackSender|MediaTrackSender} trackSender\n   * @param {string} name\n   * @param {Track.Priority} priority\n   * @param {?NoiseCancellationVendor} noiseCancellationVendor\n   * @param {object} [options]\n   */\n  function LocalTrackPublicationV2(trackSender, name, priority, noiseCancellationVendor, options) {\n    var _this = _super.call(this, trackSender, name, priority) || this;\n    Object.defineProperties(_this, {\n      _log: {\n        value: options.log.createLog('default', _this)\n      },\n      _mediaStates: {\n        value: {\n          recordings: null\n        },\n        writable: true\n      },\n      _noiseCancellationVendor: {\n        value: noiseCancellationVendor\n      }\n    });\n    return _this;\n  }\n  /**\n   * Get the {@link LocalTrackPublicationV2#Representation} of a given {@link TrackSignaling}.\n   * @returns {LocalTrackPublicationV2#Representation} - without the SID\n   */\n  LocalTrackPublicationV2.prototype.getState = function () {\n    var state = {\n      enabled: this.isEnabled,\n      id: this.id,\n      kind: this.kind,\n      name: this.name,\n      priority: this.updatedPriority\n    };\n    if (this._noiseCancellationVendor) {\n      // eslint-disable-next-line camelcase\n      state.audio_processor = this._noiseCancellationVendor;\n    }\n    return state;\n  };\n  LocalTrackPublicationV2.prototype.toString = function () {\n    return \"[LocalTrackPublicationV2: \" + this.sid + \"]\";\n  };\n  /**\n   * Compare the {@link LocalTrackPublicationV2} to a {@link LocalTrackPublicationV2#Representation} of itself\n   * and perform any updates necessary.\n   * @param {PublishedTrack} track\n   * @returns {this}\n   * @fires TrackSignaling#updated\n   */\n  LocalTrackPublicationV2.prototype.update = function (track) {\n    switch (track.state) {\n      case 'ready':\n        this.setSid(track.sid);\n        break;\n      case 'failed':\n        {\n          var error = track.error;\n          this.publishFailed(createTwilioError(error.code, error.message));\n          break;\n        }\n      default:\n        // 'created'\n        break;\n    }\n    return this;\n  };\n  LocalTrackPublicationV2.prototype.updateMediaStates = function (mediaStates) {\n    if (!mediaStates || !mediaStates.recordings || this._mediaStates.recordings === mediaStates.recordings) {\n      return this;\n    }\n    this._mediaStates.recordings = mediaStates.recordings;\n    switch (this._mediaStates.recordings) {\n      case 'OK':\n        this._log.info('Warnings have cleared.');\n        this.emit('warningsCleared');\n        break;\n      case 'NO_MEDIA':\n        this._log.warn('Recording media lost.');\n        this.emit('warning', TwilioWarning.recordingMediaLost);\n        break;\n      default:\n        this._log.warn(\"Unknown media state detected: \" + this._mediaStates.recordings);\n        break;\n    }\n    return this;\n  };\n  return LocalTrackPublicationV2;\n}(LocalTrackPublicationSignaling);\n/**\n * The Room Signaling Protocol (RSP) representation of a {@link LocalTrackPublicationV2}.\n * @typedef {object} LocalTrackPublicationV2#Representation\n * @property {boolean} enabled\n * @property {Track.ID} id\n * @property {Track.Kind} kind\n * @property {string} name\n * @priority {Track.Priority} priority\n * @property {Track.SID} sid\n */\nmodule.exports = LocalTrackPublicationV2;","map":{"version":3,"mappings":"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","names":["LocalTrackPublicationSignaling","require","TwilioWarning","createTwilioError","__extends","trackSender","name","priority","noiseCancellationVendor","options","_super","Object","defineProperties","_this","_log","value","log","createLog","_mediaStates","recordings","writable","_noiseCancellationVendor","LocalTrackPublicationV2","state","enabled","isEnabled","id","kind","updatedPriority","audio_processor","sid","track","setSid","error","publishFailed","code","message","mediaStates","info","emit","warn","recordingMediaLost","module","exports"],"sources":["/Users/aarushisingh/Projects/counteroffer/client/node_modules/twilio-video/lib/signaling/v2/localtrackpublication.js"],"sourcesContent":["'use strict';\n\nconst LocalTrackPublicationSignaling = require('../localtrackpublication');\nconst TwilioWarning = require('../../util/twiliowarning');\nconst createTwilioError = require('../../util/twilio-video-errors').createTwilioError;\n\n/**\n * @extends LocalTrackPublicationSignaling\n */\nclass LocalTrackPublicationV2 extends LocalTrackPublicationSignaling {\n  /**\n   * Construct a {@link LocalTrackPublicationV2}.\n   * @param {DataTrackSender|MediaTrackSender} trackSender\n   * @param {string} name\n   * @param {Track.Priority} priority\n   * @param {?NoiseCancellationVendor} noiseCancellationVendor\n   * @param {object} [options]\n   */\n  constructor(trackSender, name, priority, noiseCancellationVendor, options) {\n    super(trackSender, name, priority);\n\n    Object.defineProperties(this, {\n      _log: {\n        value: options.log.createLog('default', this)\n      },\n      _mediaStates: {\n        value: { recordings: null },\n        writable: true\n      },\n      _noiseCancellationVendor: {\n        value: noiseCancellationVendor,\n      }\n    });\n  }\n\n  /**\n   * Get the {@link LocalTrackPublicationV2#Representation} of a given {@link TrackSignaling}.\n   * @returns {LocalTrackPublicationV2#Representation} - without the SID\n   */\n  getState() {\n    const state = {\n      enabled: this.isEnabled,\n      id: this.id,\n      kind: this.kind,\n      name: this.name,\n      priority: this.updatedPriority,\n    };\n\n    if (this._noiseCancellationVendor) {\n      // eslint-disable-next-line camelcase\n      state.audio_processor = this._noiseCancellationVendor;\n    }\n    return state;\n  }\n\n  toString() {\n    return `[LocalTrackPublicationV2: ${this.sid}]`;\n  }\n\n  /**\n   * Compare the {@link LocalTrackPublicationV2} to a {@link LocalTrackPublicationV2#Representation} of itself\n   * and perform any updates necessary.\n   * @param {PublishedTrack} track\n   * @returns {this}\n   * @fires TrackSignaling#updated\n   */\n  update(track) {\n    switch (track.state) {\n      case 'ready':\n        this.setSid(track.sid);\n        break;\n      case 'failed': {\n        const error = track.error;\n        this.publishFailed(createTwilioError(error.code, error.message));\n        break;\n      }\n      default: // 'created'\n        break;\n    }\n    return this;\n  }\n\n  updateMediaStates(mediaStates) {\n    if (!mediaStates || !mediaStates.recordings ||\n      this._mediaStates.recordings === mediaStates.recordings) {\n      return this;\n    }\n    this._mediaStates.recordings = mediaStates.recordings;\n    switch (this._mediaStates.recordings) {\n      case 'OK':\n        this._log.info('Warnings have cleared.');\n        this.emit('warningsCleared');\n        break;\n      case 'NO_MEDIA':\n        this._log.warn('Recording media lost.');\n        this.emit('warning', TwilioWarning.recordingMediaLost);\n        break;\n      default:\n        this._log.warn(`Unknown media state detected: ${this._mediaStates.recordings}`);\n        break;\n    }\n    return this;\n  }\n}\n\n/**\n * The Room Signaling Protocol (RSP) representation of a {@link LocalTrackPublicationV2}.\n * @typedef {object} LocalTrackPublicationV2#Representation\n * @property {boolean} enabled\n * @property {Track.ID} id\n * @property {Track.Kind} kind\n * @property {string} name\n * @priority {Track.Priority} priority\n * @property {Track.SID} sid\n */\n\nmodule.exports = LocalTrackPublicationV2;\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}