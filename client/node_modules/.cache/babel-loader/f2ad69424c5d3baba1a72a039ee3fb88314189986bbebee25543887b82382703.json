{"ast":null,"code":"'use strict';\n\nvar getMediaSections = require('./').getMediaSections;\n/**\n * An {@link TrackMatcher} matches an RTCTrackEvent with a MediaStreamTrack\n * ID based on the MID of the underlying RTCRtpTransceiver.\n */\nvar TrackMatcher = /** @class */function () {\n  /**\n   * Construct an {@link TrackMatcher}.\n   */\n  function TrackMatcher() {\n    Object.defineProperties(this, {\n      _midsToTrackIds: {\n        value: new Map(),\n        writable: true\n      }\n    });\n  }\n  /**\n   * Match a given MediaStreamTrack with its ID.\n   * @param {RTCTrackEvent} event\n   * @returns {?Track.ID}\n   */\n  TrackMatcher.prototype.match = function (event) {\n    return this._midsToTrackIds.get(event.transceiver.mid) || null;\n  };\n  /**\n   * Update the {@link TrackMatcher} with a new SDP.\n   * @param {string} sdp\n   */\n  TrackMatcher.prototype.update = function (sdp) {\n    var sections = getMediaSections(sdp, '(audio|video)');\n    this._midsToTrackIds = sections.reduce(function (midsToTrackIds, section) {\n      var midMatches = section.match(/^a=mid:(.+)$/m) || [];\n      var trackIdMatches = section.match(/^a=msid:.+ (.+)$/m) || [];\n      var mid = midMatches[1];\n      var trackId = trackIdMatches[1];\n      return mid && trackId ? midsToTrackIds.set(mid, trackId) : midsToTrackIds;\n    }, this._midsToTrackIds);\n  };\n  return TrackMatcher;\n}();\nmodule.exports = TrackMatcher;","map":{"version":3,"mappings":"AAAA,YAAY;;AAEJ,oBAAgB,GAAKA,OAAO,CAAC,IAAI,CAAC,iBAAlB;AAExB;;;;AAIA;EACE;;;EAGA;IACEC,MAAM,CAACC,gBAAgB,CAAC,IAAI,EAAE;MAC5BC,eAAe,EAAE;QACfC,KAAK,EAAE,IAAIC,GAAG,EAAE;QAChBC,QAAQ,EAAE;;KAEb,CAAC;EACJ;EAEA;;;;;EAKAC,4BAAK,GAAL,UAAMC,KAAK;IACT,OAAO,IAAI,CAACL,eAAe,CAACM,GAAG,CAACD,KAAK,CAACE,WAAW,CAACC,GAAG,CAAC,IAAI,IAAI;EAChE,CAAC;EAED;;;;EAIAJ,6BAAM,GAAN,UAAOK,GAAG;IACR,IAAMC,QAAQ,GAAGC,gBAAgB,CAACF,GAAG,EAAE,eAAe,CAAC;IACvD,IAAI,CAACT,eAAe,GAAGU,QAAQ,CAACE,MAAM,CAAC,UAACC,cAAc,EAAEC,OAAO;MAC7D,IAAMC,UAAU,GAAGD,OAAO,CAACE,KAAK,CAAC,eAAe,CAAC,IAAI,EAAE;MACvD,IAAMC,cAAc,GAAGH,OAAO,CAACE,KAAK,CAAC,mBAAmB,CAAC,IAAI,EAAE;MAC/D,IAAMR,GAAG,GAAGO,UAAU,CAAC,CAAC,CAAC;MACzB,IAAMG,OAAO,GAAGD,cAAc,CAAC,CAAC,CAAC;MACjC,OAAOT,GAAG,IAAIU,OAAO,GAAGL,cAAc,CAACM,GAAG,CAACX,GAAG,EAAEU,OAAO,CAAC,GAAGL,cAAc;IAC3E,CAAC,EAAE,IAAI,CAACb,eAAe,CAAC;EAC1B,CAAC;EACH,mBAAC;AAAD,CAAC,EApCD;AAsCAoB,MAAM,CAACC,OAAO,GAAGjB,YAAY","names":["require","Object","defineProperties","_midsToTrackIds","value","Map","writable","TrackMatcher","event","get","transceiver","mid","sdp","sections","getMediaSections","reduce","midsToTrackIds","section","midMatches","match","trackIdMatches","trackId","set","module","exports"],"sources":["/Users/aarushisingh/Projects/counteroffer/client/node_modules/twilio-video/lib/util/sdp/trackmatcher.js"],"sourcesContent":["'use strict';\n\nconst { getMediaSections } = require('./');\n\n/**\n * An {@link TrackMatcher} matches an RTCTrackEvent with a MediaStreamTrack\n * ID based on the MID of the underlying RTCRtpTransceiver.\n */\nclass TrackMatcher {\n  /**\n   * Construct an {@link TrackMatcher}.\n   */\n  constructor() {\n    Object.defineProperties(this, {\n      _midsToTrackIds: {\n        value: new Map(),\n        writable: true\n      }\n    });\n  }\n\n  /**\n   * Match a given MediaStreamTrack with its ID.\n   * @param {RTCTrackEvent} event\n   * @returns {?Track.ID}\n   */\n  match(event) {\n    return this._midsToTrackIds.get(event.transceiver.mid) || null;\n  }\n\n  /**\n   * Update the {@link TrackMatcher} with a new SDP.\n   * @param {string} sdp\n   */\n  update(sdp) {\n    const sections = getMediaSections(sdp, '(audio|video)');\n    this._midsToTrackIds = sections.reduce((midsToTrackIds, section) => {\n      const midMatches = section.match(/^a=mid:(.+)$/m) || [];\n      const trackIdMatches = section.match(/^a=msid:.+ (.+)$/m) || [];\n      const mid = midMatches[1];\n      const trackId = trackIdMatches[1];\n      return mid && trackId ? midsToTrackIds.set(mid, trackId) : midsToTrackIds;\n    }, this._midsToTrackIds);\n  }\n}\n\nmodule.exports = TrackMatcher;\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}