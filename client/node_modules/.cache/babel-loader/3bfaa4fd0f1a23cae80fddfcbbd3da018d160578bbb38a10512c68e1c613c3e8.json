{"ast":null,"code":"/* eslint callback-return:0 */\n'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MediaSignaling = require('./mediasignaling');\nvar messageId = 1;\nvar PublisherHintsSignaling = /** @class */function (_super) {\n  __extends(PublisherHintsSignaling, _super);\n  /**\n   * Construct a {@link RenderHintsSignaling}.\n   */\n  function PublisherHintsSignaling(getReceiver, options) {\n    var _this = _super.call(this, getReceiver, 'publisher_hints', options) || this;\n    _this.on('ready', function (transport) {\n      _this._log.debug('publisher_hints transport ready:', transport);\n      transport.on('message', function (message) {\n        _this._log.debug('Incoming: ', message);\n        switch (message.type) {\n          case 'publisher_hints':\n            if (message.publisher && message.publisher.hints && message.publisher.id) {\n              _this._processPublisherHints(message.publisher.hints, message.publisher.id);\n            }\n            break;\n          default:\n            _this._log.warn('Unknown message type: ', message.type);\n            break;\n        }\n      });\n    });\n    return _this;\n  }\n  PublisherHintsSignaling.prototype.sendTrackReplaced = function (_a) {\n    var trackSid = _a.trackSid;\n    if (!this._transport) {\n      return;\n    }\n    var payLoad = {\n      type: 'client_reset',\n      track: trackSid,\n      id: messageId++\n    };\n    this._log.debug('Outgoing: ', payLoad);\n    this._transport.publish(payLoad);\n  };\n  PublisherHintsSignaling.prototype.sendHintResponse = function (_a) {\n    var id = _a.id,\n      hints = _a.hints;\n    if (!this._transport) {\n      return;\n    }\n    var payLoad = {\n      type: 'publisher_hints',\n      id: id,\n      hints: hints\n    };\n    this._log.debug('Outgoing: ', payLoad);\n    this._transport.publish(payLoad);\n  };\n  /**\n   * @private\n   */\n  PublisherHintsSignaling.prototype._processPublisherHints = function (hints, id) {\n    try {\n      this.emit('updated', hints, id);\n    } catch (ex) {\n      this._log.error('error processing hints:', ex);\n    }\n  };\n  return PublisherHintsSignaling;\n}(MediaSignaling);\nmodule.exports = PublisherHintsSignaling;","map":{"version":3,"mappings":"AAAA;AACA,YAAY;;;;;;;;;;;;;;;;;;;;;;AAEZ,IAAMA,cAAc,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AAElD,IAAIC,SAAS,GAAG,CAAC;AACjB;EAAsCC;EACpC;;;EAGA,iCAAYC,WAAW,EAAEC,OAAO;IAAhC,YACEC,kBAAMF,WAAW,EAAE,iBAAiB,EAAEC,OAAO,CAAC;IAC9CE,KAAI,CAACC,EAAE,CAAC,OAAO,EAAE,mBAAS;MACxBD,KAAI,CAACE,IAAI,CAACC,KAAK,CAAC,kCAAkC,EAAEC,SAAS,CAAC;MAC9DA,SAAS,CAACH,EAAE,CAAC,SAAS,EAAE,iBAAO;QAC7BD,KAAI,CAACE,IAAI,CAACC,KAAK,CAAC,YAAY,EAAEE,OAAO,CAAC;QACtC,QAAQA,OAAO,CAACC,IAAI;UAClB,KAAK,iBAAiB;YACpB,IAAID,OAAO,CAACE,SAAS,IAAIF,OAAO,CAACE,SAAS,CAACC,KAAK,IAAIH,OAAO,CAACE,SAAS,CAACE,EAAE,EAAE;cACxET,KAAI,CAACU,sBAAsB,CAACL,OAAO,CAACE,SAAS,CAACC,KAAK,EAAEH,OAAO,CAACE,SAAS,CAACE,EAAE,CAAC;;YAE5E;UACF;YACET,KAAI,CAACE,IAAI,CAACS,IAAI,CAAC,wBAAwB,EAAEN,OAAO,CAACC,IAAI,CAAC;YACtD;QAAM;MAEZ,CAAC,CAAC;IACJ,CAAC,CAAC;;EACJ;EAEAM,mDAAiB,GAAjB,UAAkBC,EAAY;QAAVC,QAAQ;IAC1B,IAAI,CAAC,IAAI,CAACC,UAAU,EAAE;MACpB;;IAGF,IAAMC,OAAO,GAAG;MACdV,IAAI,EAAE,cAAc;MACpBW,KAAK,EAAEH,QAAQ;MACfL,EAAE,EAAEd,SAAS;KACd;IACD,IAAI,CAACO,IAAI,CAACC,KAAK,CAAC,YAAY,EAAEa,OAAO,CAAC;IACtC,IAAI,CAACD,UAAU,CAACG,OAAO,CAACF,OAAO,CAAC;EAClC,CAAC;EAEDJ,kDAAgB,GAAhB,UAAiBC,EAAa;QAAXJ,EAAE;MAAED,KAAK;IAC1B,IAAI,CAAC,IAAI,CAACO,UAAU,EAAE;MACpB;;IAEF,IAAMC,OAAO,GAAG;MACdV,IAAI,EAAE,iBAAiB;MACvBG,EAAE;MACFD,KAAK;KACN;IACD,IAAI,CAACN,IAAI,CAACC,KAAK,CAAC,YAAY,EAAEa,OAAO,CAAC;IACtC,IAAI,CAACD,UAAU,CAACG,OAAO,CAACF,OAAO,CAAC;EAClC,CAAC;EAED;;;EAGAJ,wDAAsB,GAAtB,UAAuBJ,KAAK,EAAEC,EAAE;IAC9B,IAAI;MACF,IAAI,CAACU,IAAI,CAAC,SAAS,EAAEX,KAAK,EAAEC,EAAE,CAAC;KAChC,CAAC,OAAOW,EAAE,EAAE;MACX,IAAI,CAAClB,IAAI,CAACmB,KAAK,CAAC,yBAAyB,EAAED,EAAE,CAAC;;EAElD,CAAC;EACH,8BAAC;AAAD,CAAC,CA7DqC3B,cAAc;AAgEpD6B,MAAM,CAACC,OAAO,GAAGX,uBAAuB","names":["MediaSignaling","require","messageId","__extends","getReceiver","options","_super","_this","on","_log","debug","transport","message","type","publisher","hints","id","_processPublisherHints","warn","PublisherHintsSignaling","_a","trackSid","_transport","payLoad","track","publish","emit","ex","error","module","exports"],"sources":["/Users/aarushisingh/Projects/counteroffer/client/node_modules/twilio-video/lib/signaling/v2/publisherhintsignaling.js"],"sourcesContent":["/* eslint callback-return:0 */\n'use strict';\n\nconst MediaSignaling = require('./mediasignaling');\n\nlet messageId = 1;\nclass PublisherHintsSignaling extends MediaSignaling {\n  /**\n   * Construct a {@link RenderHintsSignaling}.\n   */\n  constructor(getReceiver, options) {\n    super(getReceiver, 'publisher_hints', options);\n    this.on('ready', transport => {\n      this._log.debug('publisher_hints transport ready:', transport);\n      transport.on('message', message => {\n        this._log.debug('Incoming: ', message);\n        switch (message.type) {\n          case 'publisher_hints':\n            if (message.publisher && message.publisher.hints && message.publisher.id) {\n              this._processPublisherHints(message.publisher.hints, message.publisher.id);\n            }\n            break;\n          default:\n            this._log.warn('Unknown message type: ', message.type);\n            break;\n        }\n      });\n    });\n  }\n\n  sendTrackReplaced({ trackSid }) {\n    if (!this._transport) {\n      return;\n    }\n\n    const payLoad = {\n      type: 'client_reset',\n      track: trackSid,\n      id: messageId++\n    };\n    this._log.debug('Outgoing: ', payLoad);\n    this._transport.publish(payLoad);\n  }\n\n  sendHintResponse({ id, hints }) {\n    if (!this._transport) {\n      return;\n    }\n    const payLoad = {\n      type: 'publisher_hints',\n      id,\n      hints\n    };\n    this._log.debug('Outgoing: ', payLoad);\n    this._transport.publish(payLoad);\n  }\n\n  /**\n   * @private\n   */\n  _processPublisherHints(hints, id) {\n    try {\n      this.emit('updated', hints, id);\n    } catch (ex) {\n      this._log.error('error processing hints:', ex);\n    }\n  }\n}\n\n\nmodule.exports = PublisherHintsSignaling;\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}