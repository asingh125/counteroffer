{"ast":null,"code":"'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar MediaSignaling = require('./mediasignaling');\nvar TrackPrioritySignaling = /** @class */function (_super) {\n  __extends(TrackPrioritySignaling, _super);\n  /**\n   * Construct a {@link TrackPrioritySignaling}.\n   * @param {Promise<DataTrackReceiver>} getReceiver\n   */\n  function TrackPrioritySignaling(getReceiver, options) {\n    var _this = _super.call(this, getReceiver, 'track_priority', options) || this;\n    Object.defineProperties(_this, {\n      _enqueuedPriorityUpdates: {\n        value: new Map()\n      }\n    });\n    _this.on('ready', function (transport) {\n      Array.from(_this._enqueuedPriorityUpdates.keys()).forEach(function (trackSid) {\n        transport.publish({\n          type: 'track_priority',\n          track: trackSid,\n          subscribe: _this._enqueuedPriorityUpdates.get(trackSid)\n        });\n        // NOTE(mpatwardhan)- we do not clear _enqueuedPriorityUpdates intentionally,\n        // this cache will is used to re-send the priorities in case of VMS-FailOver.\n      });\n    });\n\n    return _this;\n  }\n  /**\n   * @param {Track.SID} trackSid\n   * @param {'publish'|'subscribe'} publishOrSubscribe\n   * @param {Track.Priority} priority\n   */\n  TrackPrioritySignaling.prototype.sendTrackPriorityUpdate = function (trackSid, publishOrSubscribe, priority) {\n    if (publishOrSubscribe !== 'subscribe') {\n      throw new Error('only subscribe priorities are supported, found: ' + publishOrSubscribe);\n    }\n    this._enqueuedPriorityUpdates.set(trackSid, priority);\n    if (this._transport) {\n      this._transport.publish({\n        type: 'track_priority',\n        track: trackSid,\n        subscribe: priority\n      });\n    }\n  };\n  return TrackPrioritySignaling;\n}(MediaSignaling);\nmodule.exports = TrackPrioritySignaling;","map":{"version":3,"mappings":"AAAA,YAAY;;;;;;;;;;;;;;;;;;;;;;AAEZ,IAAMA,cAAc,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AAClD;EAAqCC;EACnC;;;;EAIA,gCAAYC,WAAW,EAAEC,OAAO;IAAhC,YACEC,kBAAMF,WAAW,EAAE,gBAAgB,EAAEC,OAAO,CAAC;IAE7CE,MAAM,CAACC,gBAAgB,CAACC,KAAI,EAAE;MAC5BC,wBAAwB,EAAE;QACxBC,KAAK,EAAE,IAAIC,GAAG;;KAEjB,CAAC;IAEFH,KAAI,CAACI,EAAE,CAAC,OAAO,EAAE,mBAAS;MACxBC,KAAK,CAACC,IAAI,CAACN,KAAI,CAACC,wBAAwB,CAACM,IAAI,EAAE,CAAC,CAACC,OAAO,CAAC,kBAAQ;QAC/DC,SAAS,CAACC,OAAO,CAAC;UAChBC,IAAI,EAAE,gBAAgB;UACtBC,KAAK,EAAEC,QAAQ;UACfC,SAAS,EAAEd,KAAI,CAACC,wBAAwB,CAACc,GAAG,CAACF,QAAQ;SACtD,CAAC;QACF;QACA;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;;;EACJ;EAEA;;;;;EAKAG,wDAAuB,GAAvB,UAAwBH,QAAQ,EAAEI,kBAAkB,EAAEC,QAAQ;IAC5D,IAAID,kBAAkB,KAAK,WAAW,EAAE;MACtC,MAAM,IAAIE,KAAK,CAAC,kDAAkD,GAAGF,kBAAkB,CAAC;;IAE1F,IAAI,CAAChB,wBAAwB,CAACmB,GAAG,CAACP,QAAQ,EAAEK,QAAQ,CAAC;IACrD,IAAI,IAAI,CAACG,UAAU,EAAE;MACnB,IAAI,CAACA,UAAU,CAACX,OAAO,CAAC;QACtBC,IAAI,EAAE,gBAAgB;QACtBC,KAAK,EAAEC,QAAQ;QACfC,SAAS,EAAEI;OACZ,CAAC;;EAEN,CAAC;EACH,6BAAC;AAAD,CAAC,CA7CoC1B,cAAc;AA+CnD8B,MAAM,CAACC,OAAO,GAAGP,sBAAsB","names":["MediaSignaling","require","__extends","getReceiver","options","_super","Object","defineProperties","_this","_enqueuedPriorityUpdates","value","Map","on","Array","from","keys","forEach","transport","publish","type","track","trackSid","subscribe","get","TrackPrioritySignaling","publishOrSubscribe","priority","Error","set","_transport","module","exports"],"sources":["/Users/aarushisingh/Projects/counteroffer/client/node_modules/twilio-video/lib/signaling/v2/trackprioritysignaling.js"],"sourcesContent":["'use strict';\n\nconst MediaSignaling = require('./mediasignaling');\nclass TrackPrioritySignaling extends MediaSignaling {\n  /**\n   * Construct a {@link TrackPrioritySignaling}.\n   * @param {Promise<DataTrackReceiver>} getReceiver\n   */\n  constructor(getReceiver, options) {\n    super(getReceiver, 'track_priority', options);\n\n    Object.defineProperties(this, {\n      _enqueuedPriorityUpdates: {\n        value: new Map()\n      },\n    });\n\n    this.on('ready', transport => {\n      Array.from(this._enqueuedPriorityUpdates.keys()).forEach(trackSid => {\n        transport.publish({\n          type: 'track_priority',\n          track: trackSid,\n          subscribe: this._enqueuedPriorityUpdates.get(trackSid)\n        });\n        // NOTE(mpatwardhan)- we do not clear _enqueuedPriorityUpdates intentionally,\n        // this cache will is used to re-send the priorities in case of VMS-FailOver.\n      });\n    });\n  }\n\n  /**\n   * @param {Track.SID} trackSid\n   * @param {'publish'|'subscribe'} publishOrSubscribe\n   * @param {Track.Priority} priority\n   */\n  sendTrackPriorityUpdate(trackSid, publishOrSubscribe, priority) {\n    if (publishOrSubscribe !== 'subscribe') {\n      throw new Error('only subscribe priorities are supported, found: ' + publishOrSubscribe);\n    }\n    this._enqueuedPriorityUpdates.set(trackSid, priority);\n    if (this._transport) {\n      this._transport.publish({\n        type: 'track_priority',\n        track: trackSid,\n        subscribe: priority\n      });\n    }\n  }\n}\n\nmodule.exports = TrackPrioritySignaling;\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}