{"ast":null,"code":"/* eslint new-cap:0 */\n'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n  return to;\n};\nvar TrackPublication = require('./trackpublication');\nvar _a = require('../../util/constants'),\n  E = _a.typeErrors,\n  trackPriority = _a.trackPriority;\n/**\n * A {@link LocalTrackPublication} is a {@link LocalTrack} that has been\n * published to a {@link Room}.\n * @extends TrackPublication\n * @property {boolean} isTrackEnabled - whether the published {@link LocalTrack}\n *   is enabled\n * @property {Track.Kind} kind - kind of the published {@link LocalTrack}\n * @property {Track.Priority} priority - the publish priority of the {@link LocalTrack}\n * @property {LocalTrack} track - the {@link LocalTrack}\n * @emits LocalTrackPublication#warning\n * @emits LocalTrackPublication#warningsCleared\n */\nvar LocalTrackPublication = /** @class */function (_super) {\n  __extends(LocalTrackPublication, _super);\n  /**\n   * Construct a {@link LocalTrackPublication}.\n   * @param {LocalTrackPublicationSignaling} signaling - The corresponding\n   *   {@link LocalTrackPublicationSignaling}\n   * @param {LocalTrack} track - The {@link LocalTrack}\n   * @param {function(LocalTrackPublication): void} unpublish - The callback\n   *   that unpublishes the {@link LocalTrackPublication}\n   * @param {TrackPublicationOptions} options - {@link LocalTrackPublication}\n   *   options\n   */\n  function LocalTrackPublication(signaling, track, unpublish, options) {\n    var _this = _super.call(this, track.name, signaling.sid, options) || this;\n    Object.defineProperties(_this, {\n      _reemitSignalingEvent: {\n        value: function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return _this.emit.apply(_this, __spreadArray([args && args.length ? 'warning' : 'warningsCleared'], __read(args)));\n        }\n      },\n      _reemitTrackEvent: {\n        value: function () {\n          return _this.emit(_this.isTrackEnabled ? 'trackEnabled' : 'trackDisabled');\n        }\n      },\n      _signaling: {\n        value: signaling\n      },\n      _unpublish: {\n        value: unpublish\n      },\n      isTrackEnabled: {\n        enumerable: true,\n        get: function () {\n          return this.track.kind === 'data' ? true : this.track.isEnabled;\n        }\n      },\n      kind: {\n        enumerable: true,\n        value: track.kind\n      },\n      priority: {\n        enumerable: true,\n        get: function () {\n          return signaling.updatedPriority;\n        }\n      },\n      track: {\n        enumerable: true,\n        value: track\n      }\n    });\n    ['disabled', 'enabled'].forEach(function (name) {\n      return track.on(name, _this._reemitTrackEvent);\n    });\n    ['warning', 'warningsCleared'].forEach(function (name) {\n      return signaling.on(name, _this._reemitSignalingEvent);\n    });\n    return _this;\n  }\n  LocalTrackPublication.prototype.toString = function () {\n    return \"[LocalTrackPublication #\" + this._instanceId + \": \" + this.trackSid + \"]\";\n  };\n  /**\n   * Update the {@link Track.Priority} of the published {@link LocalTrack}.\n   * @param {Track.Priority} priority - the new {@link Track.priority}\n   * @returns {this}\n   * @throws {RangeError}\n   */\n  LocalTrackPublication.prototype.setPriority = function (priority) {\n    var priorityValues = Object.values(trackPriority);\n    if (!priorityValues.includes(priority)) {\n      throw E.INVALID_VALUE('priority', priorityValues);\n    }\n    this._signaling.setPriority(priority);\n    return this;\n  };\n  /**\n   * Unpublish a {@link LocalTrackPublication}. This means that the media\n   * from this {@link LocalTrackPublication} is no longer available to the\n   * {@link Room}'s {@link RemoteParticipant}s.\n   * @returns {this}\n   */\n  LocalTrackPublication.prototype.unpublish = function () {\n    var _this = this;\n    ['disabled', 'enabled'].forEach(function (name) {\n      return _this.track.removeListener(name, _this._reemitTrackEvent);\n    });\n    ['warning', 'warningsCleared'].forEach(function (name) {\n      return _this._signaling.removeListener(name, _this._reemitSignalingEvent);\n    });\n    this._unpublish(this);\n    return this;\n  };\n  return LocalTrackPublication;\n}(TrackPublication);\n/**\n * The published {@link LocalTrack} encountered a warning.\n * This event is only raised if you enabled warnings using <code>notifyWarnings</code> in <code>ConnectOptions</code>.\n * @event LocalTrackPublication#warning\n * @param {string} name - The warning that was raised.\n */\n/**\n * The published {@link LocalTrack} cleared all warnings.\n * This event is only raised if you enabled warnings using <code>notifyWarnings</code> in <code>ConnectOptions</code>.\n * @event LocalTrackPublication#warningsCleared\n */\nmodule.exports = LocalTrackPublication;","map":{"version":3,"mappings":"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","names":["TrackPublication","require","E","trackPriority","__extends","signaling","track","unpublish","options","_super","name","sid","Object","defineProperties","_this","_reemitSignalingEvent","value","_i","args","emit","length","_reemitTrackEvent","isTrackEnabled","_signaling","_unpublish","enumerable","get","kind","isEnabled","priority","updatedPriority","forEach","on","LocalTrackPublication","_instanceId","trackSid","priorityValues","values","includes","INVALID_VALUE","setPriority","removeListener","module","exports"],"sources":["/Users/aarushisingh/Projects/counteroffer/client/node_modules/twilio-video/lib/media/track/localtrackpublication.js"],"sourcesContent":["/* eslint new-cap:0 */\n'use strict';\n\nconst TrackPublication = require('./trackpublication');\nconst { typeErrors: E, trackPriority } = require('../../util/constants');\n\n/**\n * A {@link LocalTrackPublication} is a {@link LocalTrack} that has been\n * published to a {@link Room}.\n * @extends TrackPublication\n * @property {boolean} isTrackEnabled - whether the published {@link LocalTrack}\n *   is enabled\n * @property {Track.Kind} kind - kind of the published {@link LocalTrack}\n * @property {Track.Priority} priority - the publish priority of the {@link LocalTrack}\n * @property {LocalTrack} track - the {@link LocalTrack}\n * @emits LocalTrackPublication#warning\n * @emits LocalTrackPublication#warningsCleared\n */\nclass LocalTrackPublication extends TrackPublication {\n  /**\n   * Construct a {@link LocalTrackPublication}.\n   * @param {LocalTrackPublicationSignaling} signaling - The corresponding\n   *   {@link LocalTrackPublicationSignaling}\n   * @param {LocalTrack} track - The {@link LocalTrack}\n   * @param {function(LocalTrackPublication): void} unpublish - The callback\n   *   that unpublishes the {@link LocalTrackPublication}\n   * @param {TrackPublicationOptions} options - {@link LocalTrackPublication}\n   *   options\n   */\n  constructor(signaling, track, unpublish, options) {\n    super(track.name, signaling.sid, options);\n\n    Object.defineProperties(this, {\n      _reemitSignalingEvent: {\n        value: (...args) => this.emit(\n          args && args.length ? 'warning' : 'warningsCleared',\n          ...args\n        )\n      },\n      _reemitTrackEvent: {\n        value: () => this.emit(this.isTrackEnabled\n          ? 'trackEnabled'\n          : 'trackDisabled')\n      },\n      _signaling: {\n        value: signaling\n      },\n      _unpublish: {\n        value: unpublish\n      },\n      isTrackEnabled: {\n        enumerable: true,\n        get() {\n          return this.track.kind === 'data' ? true : this.track.isEnabled;\n        }\n      },\n      kind: {\n        enumerable: true,\n        value: track.kind\n      },\n      priority: {\n        enumerable: true,\n        get() {\n          return signaling.updatedPriority;\n        }\n      },\n      track: {\n        enumerable: true,\n        value: track\n      }\n    });\n\n    ['disabled', 'enabled'].forEach(name =>\n      track.on(name, this._reemitTrackEvent));\n\n    ['warning', 'warningsCleared'].forEach(name =>\n      signaling.on(name, this._reemitSignalingEvent));\n  }\n\n  toString() {\n    return `[LocalTrackPublication #${this._instanceId}: ${this.trackSid}]`;\n  }\n\n  /**\n   * Update the {@link Track.Priority} of the published {@link LocalTrack}.\n   * @param {Track.Priority} priority - the new {@link Track.priority}\n   * @returns {this}\n   * @throws {RangeError}\n   */\n  setPriority(priority) {\n    const priorityValues = Object.values(trackPriority);\n    if (!priorityValues.includes(priority)) {\n      throw E.INVALID_VALUE('priority', priorityValues);\n    }\n    this._signaling.setPriority(priority);\n    return this;\n  }\n\n  /**\n   * Unpublish a {@link LocalTrackPublication}. This means that the media\n   * from this {@link LocalTrackPublication} is no longer available to the\n   * {@link Room}'s {@link RemoteParticipant}s.\n   * @returns {this}\n   */\n  unpublish() {\n    ['disabled', 'enabled'].forEach(name =>\n      this.track.removeListener(name, this._reemitTrackEvent));\n\n    ['warning', 'warningsCleared'].forEach(name =>\n      this._signaling.removeListener(name, this._reemitSignalingEvent));\n\n    this._unpublish(this);\n    return this;\n  }\n}\n\n/**\n * The published {@link LocalTrack} encountered a warning.\n * This event is only raised if you enabled warnings using <code>notifyWarnings</code> in <code>ConnectOptions</code>.\n * @event LocalTrackPublication#warning\n * @param {string} name - The warning that was raised.\n */\n\n/**\n * The published {@link LocalTrack} cleared all warnings.\n * This event is only raised if you enabled warnings using <code>notifyWarnings</code> in <code>ConnectOptions</code>.\n * @event LocalTrackPublication#warningsCleared\n */\n\nmodule.exports = LocalTrackPublication;\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}